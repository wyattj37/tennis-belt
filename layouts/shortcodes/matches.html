<!-- Header with toggle button -->
<div style="display:flex; justify-content: space-between; align-items: center; max-width:700px; margin:2rem auto;">
  <h3 style="margin:0;">Complete Lineage of Belt Holders:</h3>
  <button id="lineage-toggle-btn" style="
      padding:0.3rem 0.8rem;
      font-size:0.95rem;
      font-weight:bold;
      background-color:#0d6efd;
      color:white;
      border:none;
      border-radius:4px;
      cursor:pointer;
  ">WTA</button>
</div>

<style>
.lineage {
  font-family: system-ui, sans-serif;
  line-height: 1.4;
  margin: 2rem auto;
  max-width: 700px;
  border-left: 3px solid #ccc;
  padding-left: 1.5rem;
}

.entry {
  position: relative;
  margin-bottom: 2rem;
}

.entry::before {
  content: "";
  position: absolute;
  left: -1.91rem;
  top: 0.5rem;
  width: 10px;
  height: 10px;
  background: #0d6efd;
  border-radius: 50%;
}

.holder {
  font-weight: 600;
  font-size: 1.2rem;
  display: flex;
  justify-content: space-between;
}

.details {
  margin-left: 2rem;
  color: #555;
  font-size: 0.95rem;
  line-height: 1.3;
  border-left: 2px solid #ddd;
  padding-left: 1rem;
  margin-top: 0.5rem;
  width: calc(100% - 2rem); /* fill remaining space */
  box-sizing: border-box;
}
</style>

{{ $emojiMap := .Site.Data.country_flags }}

<!-- Parent wrapper -->
<div style="max-width:700px; margin:0 auto;">

  <!-- ATP Lineage -->
  <div id="lineage-atp" class="lineage" style="width:100%;">
    {{ $matches := .Site.Data.atp_lineage }}
    {{ range $matches }}
    <div class="entry">
      <div class="holder">
        {{ $emoji := index $emojiMap .country }}
        <span> {{ $emoji }} {{ .holder }}</span>
        <span>{{ .defenses }} Defense{{ if ne .defenses 1 }}s{{ end }}</span>
      </div>
      <div class="details">
        {{ $seconds := div .date_won 1000 }}
        {{ $timestamp := int $seconds }}
        {{ $t := time $timestamp }}
        {{ $formatted := $t.Format "January 2006" }}
        def. {{ .won_from }}
        <br>
        {{ .score }}  |  {{ .tournament_won }} ({{ .round_won }}) {{ $formatted }}
      </div>
    </div>
    {{ end }}
  </div>

  <!-- WTA Lineage -->
  <div id="lineage-wta" class="lineage" style="display:none; width:100%;">
    {{ $matches := .Site.Data.wta_lineage }}
    {{ range $matches }}
    <div class="entry">
      <div class="holder">
        {{ $emoji := index $emojiMap .country }}
        <span> {{ $emoji }} {{ .holder }}</span>
        <span>{{ .defenses }} Defense{{ if ne .defenses 1 }}s{{ end }}</span>
      </div>
      <div class="details">
        {{ $formatted := .date_won }}
        def. {{ .won_from }}
        <br>
        {{ .score }}  |  {{ .tournament_won }} ({{ .round_won }}) {{ $formatted }}
      </div>
    </div>
    {{ end }}
  </div>

</div>

<script>
(function() {
  const btn = document.getElementById("lineage-toggle-btn");
  const atpDiv = document.getElementById("lineage-atp");
  const wtaDiv = document.getElementById("lineage-wta");

  let currentTour = "atp";

  btn.addEventListener("click", function() {
    if (currentTour === "atp") {
      currentTour = "wta";
      atpDiv.style.display = "none";
      wtaDiv.style.display = "block";
      btn.textContent = "ATP";
    } else {
      currentTour = "atp";
      atpDiv.style.display = "block";
      wtaDiv.style.display = "none";
      btn.textContent = "WTA";
    }
  });
})();
</script>
